<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC 
	"-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" 
	"http://struts.apache.org/dtds/struts-2.1.dtd">

<struts>
	<constant name="struts.objectFactory" value="spring" />

	<package name="user" namespace="/user" extends="struts-default">

		<!-- 用户登录请求处理Action -->
		<action name="login" class="loginAction" method="login">
			<result name="admin" type="redirect">/admin/login_success.jsp</result>
			<result name="success" type="redirect">index.jsp</result>
			<result name="login">login.jsp</result>
		</action>
		<!-- 用户退出请求处理Action -->
		<action name="logout" class="loginAction" method="logout">
			<result name="login" type="redirect">login.jsp</result>
			<result>login.jsp</result>
		</action>
		<!-- 用户注册请求处理Action -->
		<action name="register" class="registerAction" method="register">
			<result name="success">register_success.jsp</result>
			<result name="failed">register.jsp</result>
		</action>
		<!-- 用户注册用户名是否存在验证AJAX请求处理Action -->
		<action name="isNameExist" class="registerAction" method="validateName">
			<result name="success" type="stream"></result>
		</action>
		<!-- 文件上传请求的Action -->
		<action name="fileUpload" class="fileUploadAction" method="upload">
			<param name="uploadDir">/pictures/default</param>
			<result name="success">index.jsp</result>
		</action>
		<!-- 用户头像编辑请求Action -->
		<action name="editPhoto" class="photoEditAction" method="editPhoto">
			<result name="edit">photo_edit.jsp</result>
		</action>
		<!-- Random验证码 -->
		<action name="random" class="randomNumberAction" method="execute">
			<result name="success" type="stream">
				<param name="contentType">image/jpeg</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		<!-- 异步更新用户状态 -->
		<action name="changeStmt" class="statementAction" method="updateStatement">
			<result name="success" type="stream"></result>
		</action>
		<!-- 异步获得用户最新的一条状态信息 -->
		<action name="getNewStmt" class="statementAction" method="getLatestStatement">
			<result name="success" type="stream"></result>
		</action>
		<!-- 异步获得用户好友新鲜事 -->
		<action name="latestMsg" class="latestMsgAction" method="getLatestMsg">
			<result name="success" type="stream"></result>
		</action>

		<!-- 发布blog -->
		<action name="publishBlog" class="blogAction" method="publish">
			<result name="success" type="redirect">showAllBlogs</result>
		</action>

		<!-- 查看某一页的blog -->
		<action name="showAllBlogs" class="blogAction" method="showBlogs">
			<result name="success" >all_blogs.jsp</result>
		</action>

		<!-- 查看某一篇自己的blog -->
		<action name="showBlog" class="blogAction" method="showBlog">
			<result name="success">modify_blog.jsp</result>
		</action>
		
		<action name="updateBlog" class="blogAction" method="updateBlog">
			<result name="success" type="redirect">showAllBlogs</result>
		</action>
		
		
		<action name="personalInfo" class="personalInfoAction" method="showPersonalInfo">
			<result name="success" type="redirect">personal_info.jsp</result>
		</action>
		
		<action name="showFriends" class="friendAction" method="showFriends">
			<result name="success">friend.jsp</result>
		</action>
		
		<action name="searchFriends" class="friendAction" method="searchFriends">
			<result name="success">friend.jsp</result>
			<result name="searchUser" type="redirect">
			searchUser?userName=%{userName}</result>
		</action>
		
		<action name="deleteFriend" class="friendAction" method="deleteFriend">
			<result name="success" type="redirectAction">showFriends</result>
		</action>
		
		<action name="addFriend" class="friendAction" method="addFriend">
			<result name="success" type="redirectAction">showFriends</result>
		</action>
		
		<action name="getFriendsByPage" class="friendAction" method="getFriendsByPage">
			<result name="success">friend.jsp</result>
		</action>
		
		<action name="searchUser" class="userAction" method="searchUser">
			<result name="success">search_user.jsp</result>
		</action>
	</package>

	<include file="struts_admin.xml" />
	<!-- Add packages here -->

</struts>
